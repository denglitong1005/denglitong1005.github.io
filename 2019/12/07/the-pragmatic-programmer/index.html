<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/rust-logo-64x64.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/rust-logo-128x128.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/rust-logo-64x64.png?v=5.1.4">


  <link rel="mask-icon" href="/images/rust-logo-64x64.png?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="梧桐树下" type="application/atom+xml">






<meta name="description" content="1.我的源码让猫给吃了   注重实效的程序员的特征是什么？   我们觉得是他们处理问题、寻求解决方案时的态度、风格、哲学。   他们能够越过直接的问题去思考，总是设法把问题放在更大的语境中，总是设法注意更大的图景。   毕竟，没有这样的更大的语境，你又怎能注重实效？你又怎能做出明智的妥协和有见识的决策？   他们成功的另一关键是他们对他们所做的每件事情负责。    在所有的弱点中，最大的弱点就是害">
<meta name="keywords" content="梧桐树下,denglitong,你的木同哥">
<meta property="og:type" content="article">
<meta property="og:title" content="程序员修炼之道-读书笔记">
<meta property="og:url" content="http://denglitong.com/2019/12/07/the-pragmatic-programmer/index.html">
<meta property="og:site_name" content="梧桐树下">
<meta property="og:description" content="1.我的源码让猫给吃了   注重实效的程序员的特征是什么？   我们觉得是他们处理问题、寻求解决方案时的态度、风格、哲学。   他们能够越过直接的问题去思考，总是设法把问题放在更大的语境中，总是设法注意更大的图景。   毕竟，没有这样的更大的语境，你又怎能注重实效？你又怎能做出明智的妥协和有见识的决策？   他们成功的另一关键是他们对他们所做的每件事情负责。    在所有的弱点中，最大的弱点就是害">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-12-14T11:51:09.399Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="程序员修炼之道-读书笔记">
<meta name="twitter:description" content="1.我的源码让猫给吃了   注重实效的程序员的特征是什么？   我们觉得是他们处理问题、寻求解决方案时的态度、风格、哲学。   他们能够越过直接的问题去思考，总是设法把问题放在更大的语境中，总是设法注意更大的图景。   毕竟，没有这样的更大的语境，你又怎能注重实效？你又怎能做出明智的妥协和有见识的决策？   他们成功的另一关键是他们对他们所做的每件事情负责。    在所有的弱点中，最大的弱点就是害">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://denglitong.com/2019/12/07/the-pragmatic-programmer/">





  <title>程序员修炼之道-读书笔记 | 梧桐树下</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">梧桐树下</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://denglitong.com/2019/12/07/the-pragmatic-programmer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content>
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="梧桐树下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">程序员修炼之道-读书笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-07T11:29:24+08:00">
                2019-12-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2019/12/07/the-pragmatic-programmer/" class="leancloud_visitors" data-flag-title="程序员修炼之道-读书笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  15
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-我的源码让猫给吃了"><a class="header-anchor" href="#1-我的源码让猫给吃了"></a>1.我的源码让猫给吃了</h2>
<ul>
<li>
<p>注重实效的程序员的特征是什么？</p>
<pre><code>  我们觉得是他们处理问题、寻求解决方案时的态度、风格、哲学。
  他们能够越过直接的问题去思考，总是设法把问题放在更大的语境中，总是设法注意更大的图景。
  毕竟，没有这样的更大的语境，你又怎能注重实效？你又怎能做出明智的妥协和有见识的决策？
  他们成功的另一关键是他们对他们所做的每件事情负责。
</code></pre>
</li>
<li>
<p>在所有的弱点中，最大的弱点就是害怕暴露弱点</p>
</li>
<li>
<p>责任是你主动负担的东西</p>
</li>
<li>
<p>Provide Options, Don’t Make Lame Excuses. 提供各种选择，不要找蹩脚的借口</p>
</li>
</ul>
<a id="more"></a>
<h2 id="2-软件的墒"><a class="header-anchor" href="#2-软件的墒"></a>2.软件的墒</h2>
<ul>
<li>Don’t Live with Broken Windows. 不要容忍破窗户</li>
<li>Bea Catalyst for Change. 做变化的催化剂</li>
<li>Remember the Big Picture. 记住大图景</li>
</ul>
<h2 id="4-足够好的软件"><a class="header-anchor" href="#4-足够好的软件"></a>4.足够好的软件</h2>
<ul>
<li>欲求更好，常把好事变糟。</li>
<li>让你的用户参与权衡。</li>
<li>Make Quality a Requirements Issue. 使质量成为需求问题</li>
</ul>
<h2 id="5-你的知识资产"><a class="header-anchor" href="#5-你的知识资产"></a>5.你的知识资产</h2>
<ul>
<li>
<p>知识上的投资总能得到最好的回报</p>
<pre><code>  严肃的投资者定期投资 - 作为习惯
  多元化是长期成功的关键
  聪明的投资者在保守的投资和高风险、高回报的投资之间平衡他们的资产
  投资者设法低买高卖，以获取最大回报
  应该周期性地重新评估和平衡资产
</code></pre>
</li>
<li>
<p>Invest Regularly in Your Knowledge Portfolio. 定期为你的知识资产投资</p>
<pre><code>  每年至少学习一种新语言
  每季度阅读一本技术书籍
  同时阅读非技术书籍
  上课
  参与本地用户组织
  实验不同的系统环境
  订阅商务杂志和其他期刊
  上网了解新语言或其他技术
</code></pre>
</li>
<li>
<p>持续投入</p>
</li>
<li>
<p>学习的机会</p>
</li>
<li>
<p>Critically Analyze What You Read and Hear. 批判的思考</p>
</li>
</ul>
<h2 id="6-交流"><a class="header-anchor" href="#6-交流"></a>6.交流</h2>
<ul>
<li>
<p>我相信，被打量比被忽略要好。</p>
</li>
<li>
<p>知道你想要说什么</p>
</li>
<li>
<p>了解你的听众</p>
<pre><code>  What do you want them to learn? 你想让他们学到什么？
  What is their interest in what you've got to say? 他们对你讲的什么感兴趣？
  How sophisticated are they? 他们有多富有经验？
  How much detail do they want? 他们想要多少细节？
  Whom do you want to own the information? 你想要让谁拥有这些信息？
  How can you motivate them to listen to you? 你如何促使他们听你说话？
</code></pre>
</li>
<li>
<p>选择时机</p>
</li>
<li>
<p>选择风格</p>
</li>
<li>
<p>让文档美观</p>
</li>
<li>
<p>让听众参与</p>
</li>
<li>
<p>做倾听者</p>
</li>
<li>
<p>回复他人</p>
</li>
<li>
<p>It’s Both What You Say and the Way You Say It. 你说什么和你怎么说同样重要</p>
</li>
<li>
<p>电子邮件交流</p>
</li>
</ul>
<h2 id="7-重复的危害"><a class="header-anchor" href="#7-重复的危害"></a>7.重复的危害</h2>
<ul>
<li>
<p>DRY - Don’t Repeat Yourself. 不要重复你自己</p>
<pre><code>  要把低级的知识放在代码中，它属于那里；把注释保留给其他的高级说明
  鼓励开发者相互进行主动的交流
</code></pre>
</li>
<li>
<p>Make It Easy to Reuse. 让复用变得容易</p>
<pre><code>  如果不容易，大家就不会去复用；而如果不进行复用，他们就会有重复知识的风险
</code></pre>
</li>
</ul>
<h2 id="8-正交性"><a class="header-anchor" href="#8-正交性"></a>8.正交性</h2>
<blockquote>
<p>该术语用于表示某种不相依赖性或解耦性。<br>
如果两个或更多事务中的一个发生变化不会影响其他事物，这些事务就是正交的。</p>
</blockquote>
<ul>
<li>
<p>当任何系统的各组件互相高度依赖时，就不再有局部修正（local fix）这样的可能</p>
</li>
<li>
<p>Eliminate Effects Between Unrelated Things. 消除无关事物之间的影响</p>
<pre><code>  设计自足的组件：独立、具有单一、良好定义的目的（内聚, cohesion）。
  如果组件是相互隔离的，你就知道你能改变其中之一，而不用担心其余组件。
  只要你不改变组件的外部接口，你就可以放心：你不会造成波及整个系统的问题。
</code></pre>
</li>
<li>
<p>编写正交的系统可以得到两个主要好处：</p>
<ul>
<li>
<p>提高生产率</p>
<pre><code>改动得以局部化，所以开发时间和测试时间得以降低
正交的途径还能促进复用
对正交的组件进行组合，成产率会有相当微妙的提高
</code></pre>
</li>
<li>
<p>降低风险</p>
<pre><code>有问题的代码区域被隔离开来
所得系统更健壮
正交系统很可能得到更好的测试，因为涉及测试和运行测试更容易
你不会与特定的供应商、产品、或是平台紧绑在一起，因为外部接口被隔离在独立的模块中
</code></pre>
</li>
</ul>
</li>
<li>
<p>应用正交原则的几种方式</p>
<ul>
<li>
<p>项目团队</p>
<pre><code>如果团队的组织有许多重叠，各个成员就会对责任感到困惑。每一次改动都需要整个团队开一次会，
因为他们中的任何一个人都可能受到影响。
</code></pre>
</li>
<li>
<p>设计</p>
<pre><code>系统应该由一组相互协作的模块组成，每个模块都实现不依赖于其他模块的功能。
有时这些组件被组织为多个层次，每层提供一级抽象。
这种分层的途径是涉及正交系统的强大方式。因为每层都只使用其下面的层次提供的抽象。
如果我显著的改变某个特定功能背后的需求，会有多少模块受影响？在正交系统中，答案应该是一个。
要问问自己，你的设计在多大程度上解除了与现实世界中的变化的耦合？不要依赖你无法控制的事物属性。
</code></pre>
</li>
<li>
<p>工具箱与库</p>
<pre><code>在引入工具箱或库时，他是否会迫使你对代码进行不必要的改动？
如果对象持久模型（object persistence scheme）是透明的，那么它就是正交的。
正交性的一个有趣的变体是面向切片编程（Aspect-Oriented Programming, AOP）。使用AOP的Java版本，你可以通过编写aspect、在进入类的任何方法时写日志消息。
</code></pre>
</li>
<li>
<p>编码</p>
<pre><code>每次你编写代码，都有降低应用正交性的风险。
让你的代码保持解耦、高内聚、只暴露必要的接口。
避免使用全局数据。一般而言，如果你把所需的任何语境（context）显式的传入模块，你的代码就会更易于理解和维护。
避免编写相似的函数。可以借鉴策略模式。
养成不断地批判对待自己的代码的习惯。寻找任何重新进行组织、以改善其结构和正交性的机会，这个过程叫做重构（refactoring）。
</code></pre>
</li>
<li>
<p>测试</p>
<pre><code>正交地设计和实现的系统也更易于测试，因为系统的割组件间的交互是形式化的和有限的。
我们建议让每个模块都拥有自己的、内建在代码中的单元测试，并让这些测试作为常规构建过程的一部分自动运行。（`cargo test in Rust`）
</code></pre>
</li>
<li>
<p>认同正交性</p>
<pre><code>正交性和DRY原则紧密相关，DRY原则寻求使系统中的重复将至最小，正交性原则可降低系统的各组件的相互依赖。
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="9-可撤销性"><a class="header-anchor" href="#9-可撤销性"></a>9.可撤销性</h2>
<ul>
<li>
<p>如果某个想法是你唯一的想法，再没有什么比这更危险的事情了。</p>
</li>
<li>
<p>There Are No Final Decisions. 不存在最终决策</p>
</li>
<li>
<p>灵活的架构</p>
<pre><code>  有许多人会设法保持代码的灵活性，而你还需要考虑维持架构、部署及供应商集成等领域的灵活性。
</code></pre>
</li>
</ul>
<h2 id="10-曳光弹"><a class="header-anchor" href="#10-曳光弹"></a>10.曳光弹</h2>
<ul>
<li>
<p>Use Tracer Bullets to Find the Target. 用曳光弹找到目标</p>
<pre><code>  用户能够及早看到能工作的东西。
  开发者构建了一个他们能在其中工作的结构。
  你拥有了一个集成平台。
  你有了可用于演示的东西。
  你将更能够感觉到工作进展。
</code></pre>
</li>
<li>
<p>曳光弹并非总能击中目标</p>
</li>
</ul>
<h2 id="11-原型与便笺"><a class="header-anchor" href="#11-原型与便笺"></a>11.原型与便笺</h2>
<ul>
<li>
<p>Prototype to Learn. 为了学习而制作原型</p>
<pre><code>  主要组件的责任是否得到了良好定义？是否适当？
  主要组件间的协作是否得到了良好定义？
  耦合是否得以最小化？
  你能否确定重复的潜在来源？
  接口定义和各项约束是否可接受？
  每个模块在执行过程中是否能访问到其所需的数据？是否能在需要时进行访问？
</code></pre>
</li>
</ul>
<h2 id="12-领域语言"><a class="header-anchor" href="#12-领域语言"></a>12.领域语言</h2>
<ul>
<li>语言的界限就是一个人的世界的界限</li>
<li>计算机语言会影响你思考问题的方式，以及你看待交流的方式，语言的特性都在提示或遮蔽特定的解决方案</li>
<li>Program Close to the Problem domain. 靠近问题领域编程</li>
<li>易于开发还是易于维护</li>
</ul>
<h2 id="13-估算"><a class="header-anchor" href="#13-估算"></a>13.估算</h2>
<ul>
<li>
<p>Estimate to Avoid Surprises. 估算，以避免发生意外。</p>
</li>
<li>
<p>多准确才足够准确</p>
<pre><code>  你解答问题的语境是什么？
  他们是需要高度的准确性还是模糊的准确性？
  你使用的单位粒度会对结果的解读造成影响，要选择能反映你想要传达的精确度的单位。
</code></pre>
</li>
<li>
<p>估算来自哪里</p>
<pre><code>  所有的估算都以问题的模型为基础
  借鉴已做过的人的经验
</code></pre>
</li>
<li>
<p>理解提问内容</p>
<pre><code>  把握问题域的范围
</code></pre>
</li>
<li>
<p>建立系统的模型</p>
<pre><code>  对于一个项目，模型可以是你的组织在开发过程中所用的步骤、以及系统的实现方式的非常粗略的图景
  建模既可以是创造性的，又可以是长期有用的
  建模把不精确性引入了估算过程中
</code></pre>
</li>
<li>
<p>把模型分解为组件</p>
<pre><code>  一旦拥有了模型，你就可以把它分解为组件。
  你必须要找出描述这些组件怎样交互的数学规则。
  在典型情况下，每个组件都有一些参数，组件对模型造成的影响取决于它的参数。
</code></pre>
</li>
<li>
<p>给每个参数指定值</p>
<pre><code>  给参数赋值可能会引入一些错误，关键在于找出哪些参数对结果的影响最大。
  让线路速度加倍可以让1小时内接收的数据量加倍，而增加5毫秒的传输延迟不会有显著的效果。
  你应该采用一种合理的方式计算这些关键参数。
</code></pre>
</li>
<li>
<p>计算答案</p>
</li>
<li>
<p>追踪你的估算能力</p>
<pre><code>  根据实际情况改进估算结果，使下一次估算更好。
</code></pre>
</li>
<li>
<p>估算项目进度</p>
<pre><code>  增量开发，改进上一个迭代的经验
  - 检查需求
  - 分析风险
  - 设计、实现、集成
  - 向用户确认
</code></pre>
</li>
<li>
<p>Iterate the Schedule with the Code. 通过代码对进度进行迭代</p>
<pre><code>  使进度可视化，给予管理部门最精确的进度估算
</code></pre>
</li>
</ul>
<h2 id="14-纯文本的威力"><a class="header-anchor" href="#14-纯文本的威力"></a>14.纯文本的威力</h2>
<ul>
<li>
<p>工具放大你的才干</p>
</li>
<li>
<p>让需要驱动你的采购</p>
</li>
<li>
<p>纯文本的威力</p>
<pre><code>  作为注重实效的程序员，我们的基本材料不是木头不是铁，而是知识。
  我们搜集知识，将其变为知识，随后又在我们的设计、实现、测试、以及文档中表达这些知识。
  纯文本并非意味着文本是无结构的。
</code></pre>
</li>
<li>
<p>Keep Knowledge in Plain Text. 用纯文本保存知识</p>
<pre><code>  人能够阅读的数据形式，以及自描述的数据，将比所有其他的数据形式和创建它们的应用都获得更久。
</code></pre>
</li>
<li>
<p>Unix哲学</p>
<pre><code>  提供“锋利”的小工具、其中每一样都意在把一件事情做好
</code></pre>
</li>
</ul>
<h2 id="15-shell游戏"><a class="header-anchor" href="#15-shell游戏"></a>15.shell游戏</h2>
<ul>
<li>GUI的好处是 what you see is what you get, 缺点是 what you see is all you get.</li>
<li>Use the Power of Command Shells. 利用命令shell的力量。</li>
</ul>
<h2 id="16-强力编辑"><a class="header-anchor" href="#16-强力编辑"></a>16.强力编辑</h2>
<ul>
<li>Use a Single Editor Well. 用好一种编辑器</li>
</ul>
<h2 id="17-源码控制"><a class="header-anchor" href="#17-源码控制"></a>17.源码控制</h2>
<ul>
<li>进步远非由变化组成，而是取决于好记性。不能记住过去的人，被判重复过去。</li>
<li>Always Use Souce Code Control. 总是使用源码控制。</li>
<li>源码控制与构建</li>
<li>源码控制产品</li>
</ul>
<h2 id="18-调试"><a class="header-anchor" href="#18-调试"></a>18.调试</h2>
<blockquote>
<p>这是痛苦的事：<br>
看着你自己的烦忧，并且知道<br>
不是别人、而是你自己一人所致</p>
</blockquote>
<ul>
<li>没有人能写出完美的软件，所以调试肯定要占用你大量时间。</li>
<li>调试就是解决问题，要据此发起进攻。</li>
<li>Fix the Problem, Not the Blame. 要修正问题，而不是发出指责。</li>
<li>最容易欺骗的一个人是自己。</li>
<li>调试的第一准则：Don’t Panic 不要恐慌。</li>
<li>“Select” Isn’t Broken. &quot;Select&quot;没有问题。</li>
<li>Don’t Assume it - Prove It. 不要假定，要证明。</li>
</ul>
<h2 id="19-文本操纵"><a class="header-anchor" href="#19-文本操纵"></a>19.文本操纵</h2>
<ul>
<li>
<p>Learn a Text Manipulation Language. 学习一种文本操纵语言。</p>
</li>
<li>
<p>应用示例</p>
<pre><code>  数据库schema维护
  测试数据生成
  自动生成书籍中的代码测试
  生成Web文档
</code></pre>
</li>
</ul>
<h2 id="20-代码生成器"><a class="header-anchor" href="#20-代码生成器"></a>20.代码生成器</h2>
<blockquote>
<p>Write Code That Writes Code. 编写能编写代码的代码。</p>
</blockquote>
<ul>
<li>被动代码生成器：只运行一次来生成结果</li>
<li>主动代码生成器：在每次需要其结果时被使用，比如schema表和对应访问它的数据结构</li>
</ul>
<h2 id="21-按合约设计"><a class="header-anchor" href="#21-按合约设计"></a>21.按合约设计</h2>
<blockquote>
<p>You Can’t Write Perfect Software. 你不可能写出完美的软件<br>
当每个人都确实要对你不利时，偏执就是一个好主意。</p>
</blockquote>
<ul>
<li>
<p>按合约设计</p>
<pre><code>  没有什么比常识和坦率更让人感到惊讶
</code></pre>
</li>
<li>
<p>Design with Contracts. 通过合约进行设计</p>
<pre><code>  对在开始之前接受的东西要严格，而允诺返回的东西要尽可能少
  继承和多态是面向对象语言的基石，是合约可以真正闪耀的领域
</code></pre>
</li>
</ul>
<blockquote>
<p>使用DBC的最大好处也许是它迫使需求与保证的问题走到前台来。<br>
在设计时简单地列举输入域的范围是什么、边界条件是什么、例程允诺交付什么——是向着更好的软件的一次飞跃。<br>
不对这些事项作出陈述，你就回到了靠巧合编程，那是许多项目开始、结束、失败的地方。<br>
如果语言不在代码中支持DBC，你也可以把合约作为注释放到代码中，至少在遇到麻烦时，用注释表示的合约给了你一个着手的地方。</p>
</blockquote>
<h2 id="22-死程序不说谎"><a class="header-anchor" href="#22-死程序不说谎"></a>22.死程序不说谎</h2>
<blockquote>
<p>我们很容易掉进”它不可能发生“这样一种心理状态，但如果有一个错误，就说明非常糟糕的事情已经发生了。</p>
</blockquote>
<ul>
<li>Crash Early. 早奔溃</li>
<li>要奔溃，不要破坏</li>
<li>死程序带来的危害通常比有疾患的程序要小得多</li>
</ul>
<h2 id="23-断言式编程"><a class="header-anchor" href="#23-断言式编程"></a>23.断言式编程</h2>
<blockquote>
<p>在自责中有一种满足感。当我们责备自己时，会觉得再没有人有权责备我们。<br>
人最容易欺骗的人是自己。</p>
</blockquote>
<ul>
<li>If It Can’t Happen, Use Assertions to Ensure That It Won’t.</li>
</ul>
<blockquote>
<p>如果它不可能发生，用断言确保它不会发生。</p>
</blockquote>
<ul>
<li>让断言开着</li>
</ul>
<blockquote>
<p>即使你确实有性能问题，也只关闭哪些真的有很大影响的断言。</p>
</blockquote>
<ul>
<li>断言与副作用</li>
</ul>
<blockquote>
<p>”海森堡虫子“——调试不应改变被调试系统的行为</p>
</blockquote>
<h2 id="24-何时使用异常"><a class="header-anchor" href="#24-何时使用异常"></a>24.何时使用异常</h2>
<blockquote>
<p>Use Exceptions for Exceptional Problems. 将异常用于异常的问题。<br>
异常表示即时的、非局部的控制转移</p>
</blockquote>
<ul>
<li>错误处理器是另一种选择</li>
</ul>
<blockquote>
<p>错误处理器是检测到错误时调用的例程。你可以登记一个例程处理特定范畴的错误。<br>
处理器会在其中一种错误发生时被调用。</p>
</blockquote>
<h2 id="25-怎样配平资源"><a class="header-anchor" href="#25-怎样配平资源"></a>25.怎样配平资源</h2>
<blockquote>
<p>”我把你带进这个世界，“我的父亲会说：”我也可以把你赶出去。那没有我影响。我要再造一个你“<br>
只要在编程，我们都要管理资源：内存、事务、线程、文件、定时器——所有数量有限的事物。<br>
大多数时候，资源使用遵循一种可预测的模式：你分配资源、使用它，然后解除其分配。</p>
</blockquote>
<ul>
<li>
<p>Finish What You Start. 要有始有终。</p>
<pre><code>  分配资源的例程也应该释放它（类的构造器与析构器）。
  以与资源分配的次序相反的次序解除资源的分配。这样如果一个自由含有对另一个资源的引用，你就不会造成资源被遗弃。
  在代码的不同地方分配同一组资源时，总是以相同的次序分配他们。这将降低发生死锁的可能性。
</code></pre>
</li>
<li>
<p>检查配平</p>
<pre><code>  注重实效的程序员谁也不信任，包括我们自己，所以我们觉得，构建代码、对资源确实得到了适当释放进行实际检查，这总是一个好主意。
  对于大多数应用，这通常意味着为每种资源类型编写包装，并使用这些包装追踪所有的分配和解除分配。
</code></pre>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/23/rust-borrowing-and-ownership/" rel="next" title="理解Rust中的类型设计 - Borrowing and ownership">
                <i class="fa fa-chevron-left"></i> 理解Rust中的类型设计 - Borrowing and ownership
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80NjQwMy8yMjkxNA=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt>
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">为而不争</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/denglitong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:litongdeng@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-我的源码让猫给吃了"><span class="nav-number">1.</span> <span class="nav-text">1.我的源码让猫给吃了</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-软件的墒"><span class="nav-number">2.</span> <span class="nav-text">2.软件的墒</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-足够好的软件"><span class="nav-number">3.</span> <span class="nav-text">4.足够好的软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-你的知识资产"><span class="nav-number">4.</span> <span class="nav-text">5.你的知识资产</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-交流"><span class="nav-number">5.</span> <span class="nav-text">6.交流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-重复的危害"><span class="nav-number">6.</span> <span class="nav-text">7.重复的危害</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-正交性"><span class="nav-number">7.</span> <span class="nav-text">8.正交性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-可撤销性"><span class="nav-number">8.</span> <span class="nav-text">9.可撤销性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-曳光弹"><span class="nav-number">9.</span> <span class="nav-text">10.曳光弹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-原型与便笺"><span class="nav-number">10.</span> <span class="nav-text">11.原型与便笺</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-领域语言"><span class="nav-number">11.</span> <span class="nav-text">12.领域语言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-估算"><span class="nav-number">12.</span> <span class="nav-text">13.估算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-纯文本的威力"><span class="nav-number">13.</span> <span class="nav-text">14.纯文本的威力</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-shell游戏"><span class="nav-number">14.</span> <span class="nav-text">15.shell游戏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-强力编辑"><span class="nav-number">15.</span> <span class="nav-text">16.强力编辑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-源码控制"><span class="nav-number">16.</span> <span class="nav-text">17.源码控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-调试"><span class="nav-number">17.</span> <span class="nav-text">18.调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-文本操纵"><span class="nav-number">18.</span> <span class="nav-text">19.文本操纵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-代码生成器"><span class="nav-number">19.</span> <span class="nav-text">20.代码生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-按合约设计"><span class="nav-number">20.</span> <span class="nav-text">21.按合约设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-死程序不说谎"><span class="nav-number">21.</span> <span class="nav-text">22.死程序不说谎</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-断言式编程"><span class="nav-number">22.</span> <span class="nav-text">23.断言式编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-何时使用异常"><span class="nav-number">23.</span> <span class="nav-text">24.何时使用异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-怎样配平资源"><span class="nav-number">24.</span> <span class="nav-text">25.怎样配平资源</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">17.6k</span>
  
</div>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <div class="powered-by">
    <i class="fa fa-user-md"></i>
    <span id="busuanzi_container_site_uv">
      访客数: <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>人
    </span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_pv">
      访问量：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次
    </span>
  </div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === '') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("yUxNRettXs10ubnkK2t4ah45-9Nh9j0Va", "Nm9VVskQ66YNEalce5S133Go");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
